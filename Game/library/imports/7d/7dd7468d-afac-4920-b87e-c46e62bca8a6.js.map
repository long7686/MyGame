{"version":3,"sources":["../../../../assets/Scripts/assets/Scripts/CheckPlayer.js"],"names":["Emitter","require","EnemiesTank","cc","Class","extends","Component","properties","_target","Node","onLoad","node","parent","name","getComponent","Animation","play","onBeginContact","contact","selfCollider","otherCollider","tag","flipMonster","active","chasePlayer","tween","to","position","v2","call","start","instance","emit","_whichTank","x","scale"],"mappings":";;;;;;AAAA,IAAMA,UAAUC,QAAQ,gBAAR,CAAhB;AACA,IAAMC,cAAcD,QAAQ,aAAR,CAApB;AACAE,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,iBAASL,GAAGM;AADJ,KAHP;;AAOLC,UAPK,oBAOK;AACN,YAAI,KAAKC,IAAL,CAAUC,MAAV,CAAiBC,IAAjB,KAA0B,SAA9B,EAAwC;AACpC,iBAAKF,IAAL,CAAUC,MAAV,CAAiBE,YAAjB,CAA8BX,GAAGY,SAAjC,EAA4CC,IAA5C,CAAiD,SAAjD;AACH;AACJ,KAXI;AAaLC,kBAbK,0BAaUC,OAbV,EAamBC,YAbnB,EAaiCC,aAbjC,EAa+C;AAChD,YAAIA,cAAcC,GAAd,IAAqB,CAAzB,EAA2B;AACvB,gBAAIF,aAAaR,IAAb,CAAkBC,MAAlB,CAAyBC,IAAzB,KAAkC,SAAtC,EAAgD;AAC5C,qBAAKL,OAAL,GAAeY,cAAcT,IAA7B;AACA,qBAAKW,WAAL;AACAH,6BAAaR,IAAb,CAAkBC,MAAlB,CAAyBE,YAAzB,CAAsCX,GAAGY,SAAzC,EAAoDC,IAApD,CAAyD,QAAzD;AACA,qBAAKL,IAAL,CAAUY,MAAV,GAAmB,KAAnB;AACA,qBAAKC,WAAL;AACH,aAND,MAOI;AACA,qBAAKhB,OAAL,GAAeY,cAAcT,IAA7B;AACA,qBAAKA,IAAL,CAAUY,MAAV,GAAmB,KAAnB;AACA,qBAAKZ,IAAL,CAAUY,MAAV,GAAmB,IAAnB;AACA,qBAAKC,WAAL;AACH;AACJ;AACJ,KA7BI;AA+BLA,eA/BK,yBA+BQ;AAAA;;AACT,YAAI,KAAKb,IAAL,CAAUC,MAAV,CAAiBC,IAAjB,KAA0B,SAA9B,EAAwC;AACpCV,eAAGsB,KAAH,CAAS,KAAKd,IAAL,CAAUC,MAAnB,EACCc,EADD,CACI,GADJ,EACQ,EAACC,UAAUxB,GAAGyB,EAAH,CAAM,KAAKpB,OAAL,CAAamB,QAAnB,CAAX,EADR,EAECE,IAFD,CAEM;AAAA,uBAAM,MAAKlB,IAAL,CAAUC,MAAV,CAAiBE,YAAjB,CAA8BX,GAAGY,SAAjC,EAA4CC,IAA5C,CAAiD,SAAjD,CAAN;AAAA,aAFN,EAGCa,IAHD,CAGM;AAAA,uBAAK,MAAKlB,IAAL,CAAUY,MAAV,GAAmB,IAAxB;AAAA,aAHN,EAICO,KAJD;AAKH,SAND,MAOI;AACA9B,oBAAQ+B,QAAR,CAAiBC,IAAjB,CAAsB,aAAtB,EAAqC,KAAKxB,OAA1C,EAAmD,KAAKyB,UAAxD;AACH;AAEJ,KA3CI;AA8CLX,eA9CK,yBA8CQ;AACT,YAAI,KAAKd,OAAL,CAAamB,QAAb,CAAsBO,CAAtB,GAA0B,KAAKvB,IAAL,CAAUC,MAAV,CAAiBe,QAAjB,CAA0BO,CAAxD,EAA0D;AACtD,iBAAKvB,IAAL,CAAUC,MAAV,CAAiBuB,KAAjB,GAAyBhC,GAAGyB,EAAH,CAAM,CAAN,EAAQ,CAAR,CAAzB;AACH,SAFD,MAGI;AACA,iBAAKjB,IAAL,CAAUC,MAAV,CAAiBuB,KAAjB,GAAyBhC,GAAGyB,EAAH,CAAM,CAAC,CAAP,EAAS,CAAT,CAAzB;AACH;AACJ;AArDI,CAAT","file":"CheckPlayer.js","sourceRoot":"../../../../assets/Scripts","sourcesContent":["const Emitter = require(\"EventsListener\")\nconst EnemiesTank = require(\"EnemiesTank\")\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        _target: cc.Node,\n    },\n\n    onLoad () {\n        if (this.node.parent.name === \"Monster\"){\n            this.node.parent.getComponent(cc.Animation).play(\"MonIdle\")\n        } \n    },\n\n    onBeginContact(contact, selfCollider, otherCollider){ \n        if (otherCollider.tag == 1){\n            if (selfCollider.node.parent.name === \"Monster\"){\n                this._target = otherCollider.node\n                this.flipMonster()\n                selfCollider.node.parent.getComponent(cc.Animation).play(\"MonRun\")\n                this.node.active = false;\n                this.chasePlayer()\n            }\n            else{\n                this._target = otherCollider.node\n                this.node.active = false;\n                this.node.active = true;\n                this.chasePlayer()\n            }\n        }\n    },\n\n    chasePlayer(){\n        if (this.node.parent.name === \"Monster\"){\n            cc.tween(this.node.parent)\n            .to(1.3,{position: cc.v2(this._target.position)})\n            .call(()=>  this.node.parent.getComponent(cc.Animation).play(\"MonIdle\"))\n            .call(()=> this.node.active = true)\n            .start() \n        } \n        else{\n            Emitter.instance.emit(\"playerGetIn\", this._target, this._whichTank)\n        }\n        \n    },\n\n\n    flipMonster(){\n        if (this._target.position.x > this.node.parent.position.x){\n            this.node.parent.scale = cc.v2(1,1)\n        }  \n        else{\n            this.node.parent.scale = cc.v2(-1,1)\n        }\n    },\n\n});\n"]}