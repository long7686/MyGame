{"version":3,"sources":["../../../../assets/Scripts/assets/Scripts/Enemies Monster.js"],"names":["Emitter","require","cc","Class","extends","Component","properties","animator","Animation","deadEffect","Prefab","_monsterHealth","default","serializable","start","instance","registerEvent","monsterGetDamge","bind","onBeginContact","contact","selfCollider","otherCollider","tag","deadMonster","node","group","destroy","effect","instantiate","parent","addChild","position","scale","tween","to","opacity","call","target","color","Color"],"mappings":";;;;;;AAAA,IAAMA,UAAUC,QAAQ,gBAAR,CAAhB;AACAC,GAAGC,KAAH,CAAU;AACNC,aAASF,GAAGG,SADN;;AAGNC,gBAAY;AACRC,kBAAUL,GAAGM,SADL;AAERC,oBAAYP,GAAGQ,MAFP;AAGRC,wBAAgB;AACZC,qBAAS,EADG;AAEZC,0BAAa;AAFD;AAHR,KAHN;AAWNC,SAXM,mBAWG;AACLd,gBAAQe,QAAR,CAAiBC,aAAjB,CAA+B,UAA/B,EAA2C,KAAKC,eAAL,CAAqBC,IAArB,CAA0B,IAA1B,CAA3C;AACH,KAbK;AAeNC,kBAfM,0BAeSC,OAfT,EAekBC,YAflB,EAegCC,aAfhC,EAe8C;AAChD,YAAIA,cAAcC,GAAd,IAAqB,CAAzB,EAA4B;AACxB,iBAAKC,WAAL;AACH;AACD,YAAIF,cAAcC,GAAd,IAAqB,CAAzB,EAA2B;AACvB,gBAAI,KAAKZ,cAAL,GAAsB,CAA1B,EAA4B;AACxB,qBAAKA,cAAL,IAAuB,EAAvB;AACA,qBAAKM,eAAL,CAAqB,KAAKQ,IAA1B;AACH;AACD,gBAAI,KAAKd,cAAL,IAAuB,CAA3B,EAA6B;AACzB,qBAAKa,WAAL;AACH;AACJ;AACD,YAAIF,cAAcG,IAAd,CAAmBC,KAAnB,KAA4B,QAAhC,EAAyC;AACrCJ,0BAAcG,IAAd,CAAmBE,OAAnB;AACH;AACJ,KA/BK;AAiCNH,eAjCM,yBAiCO;AACT,YAAII,SAAS1B,GAAG2B,WAAH,CAAe,KAAKpB,UAApB,CAAb;AACA,aAAKgB,IAAL,CAAUK,MAAV,CAAiBC,QAAjB,CAA0BH,MAA1B;AACAA,eAAOI,QAAP,GAAkB,KAAKP,IAAL,CAAUO,QAA5B;AACAJ,eAAOK,KAAP,GAAe,CAAf;AACA/B,WAAGgC,KAAH,CAASN,MAAT,EACKO,EADL,CACQ,GADR,EACY,EAACF,OAAM,GAAP,EADZ,EAEKE,EAFL,CAEQ,GAFR,EAEY,EAACC,SAAS,CAAV,EAFZ,EAGKC,IAHL,CAGU;AAAA,mBAAMT,OAAOD,OAAP,EAAN;AAAA,SAHV,EAIKb,KAJL;AAKA,aAAKW,IAAL,CAAUE,OAAV;AACH,KA5CK;AA8CNV,mBA9CM,2BA8CUqB,MA9CV,EA8CiB;AACnBpC,WAAGgC,KAAH,CAASI,MAAT,EACKH,EADL,CACQ,GADR,EACY,EAACI,OAAO,IAAIrC,GAAGsC,KAAP,CAAa,GAAb,EAAiB,CAAjB,EAAmB,CAAnB,EAAqB,GAArB,CAAR,EADZ,EAEKL,EAFL,CAEQ,GAFR,EAEY,EAACI,OAAO,IAAIrC,GAAGsC,KAAP,CAAa,GAAb,EAAiB,GAAjB,EAAqB,GAArB,EAAyB,GAAzB,CAAR,EAFZ,EAGKL,EAHL,CAGQ,GAHR,EAGY,EAACI,OAAO,IAAIrC,GAAGsC,KAAP,CAAa,GAAb,EAAiB,CAAjB,EAAmB,CAAnB,EAAqB,GAArB,CAAR,EAHZ,EAIKL,EAJL,CAIQ,GAJR,EAIY,EAACI,OAAO,IAAIrC,GAAGsC,KAAP,CAAa,GAAb,EAAiB,GAAjB,EAAqB,GAArB,EAAyB,GAAzB,CAAR,EAJZ,EAKKL,EALL,CAKQ,GALR,EAKY,EAACI,OAAO,IAAIrC,GAAGsC,KAAP,CAAa,GAAb,EAAiB,CAAjB,EAAmB,CAAnB,EAAqB,GAArB,CAAR,EALZ,EAMKL,EANL,CAMQ,GANR,EAMY,EAACI,OAAO,IAAIrC,GAAGsC,KAAP,CAAa,GAAb,EAAiB,GAAjB,EAAqB,GAArB,EAAyB,GAAzB,CAAR,EANZ,EAOK1B,KAPL;AAQH;AAvDK,CAAV","file":"Enemies Monster.js","sourceRoot":"../../../../assets/Scripts","sourcesContent":["const Emitter = require(\"EventsListener\")\ncc.Class ({\n    extends: cc.Component,\n\n    properties: {\n        animator: cc.Animation,\n        deadEffect: cc.Prefab,\n        _monsterHealth: {\n            default: 30,\n            serializable:false,\n        },\n    },\n    start () {\n        Emitter.instance.registerEvent(\"getDamge\", this.monsterGetDamge.bind(this))\n    },\n\n    onBeginContact(contact, selfCollider, otherCollider){ \n        if (otherCollider.tag == 1) {\n            this.deadMonster()\n        }\n        if (otherCollider.tag == 4){\n            if (this._monsterHealth > 0){\n                this._monsterHealth -= 10\n                this.monsterGetDamge(this.node)\n            }\n            if (this._monsterHealth <= 0){\n                this.deadMonster()\n            }\n        }\n        if (otherCollider.node.group ===\"Bullet\"){\n            otherCollider.node.destroy()\n        }\n    },\n\n    deadMonster(){\n        let effect = cc.instantiate(this.deadEffect)\n        this.node.parent.addChild(effect)\n        effect.position = this.node.position\n        effect.scale = 0\n        cc.tween(effect)\n            .to(0.2,{scale:0.5})\n            .to(0.5,{opacity: 0})\n            .call(() => effect.destroy())\n            .start()  \n        this.node.destroy()\n    },\n\n    monsterGetDamge(target){\n        cc.tween(target)\n            .to(0.2,{color: new cc.Color(255,0,0,255)})\n            .to(0.2,{color: new cc.Color(255,255,255,255)})\n            .to(0.2,{color: new cc.Color(255,0,0,255)})\n            .to(0.2,{color: new cc.Color(255,255,255,255)})\n            .to(0.2,{color: new cc.Color(255,0,0,255)})\n            .to(0.2,{color: new cc.Color(255,255,255,255)})\n            .start()\n    }\n\n});\n"]}