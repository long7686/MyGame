window.__require=function e(t,n,i){function s(r,c){if(!n[r]){if(!t[r]){var a=r.split("/");if(a=a[a.length-1],!t[a]){var l="function"==typeof __require&&__require;if(!c&&l)return l(a,!0);if(o)return o(a,!0);throw new Error("Cannot find module '"+r+"'")}}var h=n[r]={exports:{}};t[r][0].call(h.exports,function(e){return s(t[r][1][e]||e)},h,h.exports,e,t,n,i)}return n[r].exports}for(var o="function"==typeof __require&&__require,r=0;r<i.length;r++)s(i[r]);return s}({1:[function(e,t,n){function i(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function s(e){return"function"==typeof e}function o(e){return"number"==typeof e}function r(e){return"object"==typeof e&&null!==e}function c(e){return void 0===e}t.exports=i,i.EventEmitter=i,i.prototype._events=void 0,i.prototype._maxListeners=void 0,i.defaultMaxListeners=10,i.prototype.setMaxListeners=function(e){if(!o(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},i.prototype.emit=function(e){var t,n,i,o,a,l;if(this._events||(this._events={}),"error"===e&&(!this._events.error||r(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var h=new Error('Uncaught, unspecified "error" event. ('+t+")");throw h.context=t,h}if(c(n=this._events[e]))return!1;if(s(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:o=Array.prototype.slice.call(arguments,1),n.apply(this,o)}else if(r(n))for(o=Array.prototype.slice.call(arguments,1),i=(l=n.slice()).length,a=0;a<i;a++)l[a].apply(this,o);return!0},i.prototype.addListener=function(e,t){var n;if(!s(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,s(t.listener)?t.listener:t),this._events[e]?r(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,r(this._events[e])&&!this._events[e].warned&&(n=c(this._maxListeners)?i.defaultMaxListeners:this._maxListeners)&&n>0&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},i.prototype.on=i.prototype.addListener,i.prototype.once=function(e,t){if(!s(t))throw TypeError("listener must be a function");var n=!1;function i(){this.removeListener(e,i),n||(n=!0,t.apply(this,arguments))}return i.listener=t,this.on(e,i),this},i.prototype.removeListener=function(e,t){var n,i,o,c;if(!s(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(o=(n=this._events[e]).length,i=-1,n===t||s(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(r(n)){for(c=o;c-- >0;)if(n[c]===t||n[c].listener&&n[c].listener===t){i=c;break}if(i<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(i,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},i.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(s(n=this._events[e]))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},i.prototype.listeners=function(e){return this._events&&this._events[e]?s(this._events[e])?[this._events[e]]:this._events[e].slice():[]},i.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(s(t))return 1;if(t)return t.length}return 0},i.listenerCount=function(e,t){return e.listenerCount(t)}},{}],AmmoBoxEffect:[function(e,t,n){"use strict";cc._RF.push(t,"e5017fFsERMr5zW2M1z+nTy","AmmoBoxEffect");e("EventsListener");cc.Class({extends:cc.Component,properties:{},start:function(){this.ammoBoxAnimation()},ammoBoxAnimation:function(){cc.tween(this.node).repeatForever(cc.tween(this.node).to(.5,{scale:1.2}).to(.5,{scale:1})).start()}}),cc._RF.pop()},{EventsListener:"EventsListener"}],CheckPlayer:[function(e,t,n){"use strict";cc._RF.push(t,"7dd74aNr6xJILh+xG5ivKim","CheckPlayer");var i=e("EventsListener");e("EnemiesTank");cc.Class({extends:cc.Component,properties:{_target:cc.Node},onLoad:function(){"Monster"===this.node.parent.name&&this.node.parent.getComponent(cc.Animation).play("MonIdle")},onBeginContact:function(e,t,n){1==n.tag&&("Monster"===t.node.parent.name?(this._target=n.node,this.flipMonster(),t.node.parent.getComponent(cc.Animation).play("MonRun"),this.node.active=!1,this.chasePlayer()):(this._target=n.node,this.node.active=!1,this.node.active=!0,this.chasePlayer()))},chasePlayer:function(){var e=this;"Monster"===this.node.parent.name?cc.tween(this.node.parent).to(1.3,{position:cc.v2(this._target.position)}).call(function(){return e.node.parent.getComponent(cc.Animation).play("MonIdle")}).call(function(){return e.node.active=!0}).start():i.instance.emit("playerGetIn",this._target,this._whichTank)},flipMonster:function(){this._target.position.x>this.node.parent.position.x?this.node.parent.scale=cc.v2(1,1):this.node.parent.scale=cc.v2(-1,1)}}),cc._RF.pop()},{EnemiesTank:"EnemiesTank",EventsListener:"EventsListener"}],"Enemies Monster":[function(e,t,n){"use strict";cc._RF.push(t,"821920NoDRLro8foLnSCz/0","Enemies Monster");var i=e("EventsListener");cc.Class({extends:cc.Component,properties:{animator:cc.Animation,deadEffect:cc.Prefab,_monsterHealth:{default:30,serializable:!1}},start:function(){i.instance.registerEvent("getDamge",this.monsterGetDamge.bind(this))},onBeginContact:function(e,t,n){1==n.tag&&this.deadMonster(),4==n.tag&&(this._monsterHealth>0&&(this._monsterHealth-=10,this.monsterGetDamge(this.node)),this._monsterHealth<=0&&this.deadMonster()),"Bullet"===n.node.group&&n.node.destroy()},deadMonster:function(){var e=cc.instantiate(this.deadEffect);this.node.parent.addChild(e),e.position=this.node.position,e.scale=0,cc.tween(e).to(.2,{scale:.5}).to(.5,{opacity:0}).call(function(){return e.destroy()}).start(),this.node.destroy()},monsterGetDamge:function(e){cc.tween(e).to(.2,{color:new cc.Color(255,0,0,255)}).to(.2,{color:new cc.Color(255,255,255,255)}).to(.2,{color:new cc.Color(255,0,0,255)}).to(.2,{color:new cc.Color(255,255,255,255)}).to(.2,{color:new cc.Color(255,0,0,255)}).to(.2,{color:new cc.Color(255,255,255,255)}).start()}}),cc._RF.pop()},{EventsListener:"EventsListener"}],EnemiesTank:[function(e,t,n){"use strict";var i;function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}cc._RF.push(t,"820c5GcNSZM5LWFWTBZr51Q","EnemiesTank");var o=e("EventsListener");cc.Class({extends:cc.Component,properties:(i={barrel:cc.Node,_enemyHealth:{default:60,serializable:!1},_shootCountTime:{default:60,serializable:!1},_target:null,_angleD:null,enemyBullet:cc.Prefab,bulletSpawnPos:cc.Node,bulletPos:null},s(i,"_angleD",null),s(i,"deadEffect",cc.Prefab),s(i,"_isDead",!1),i),start:function(){o.instance.registerEvent("playerGetIn",this.lookAtPlayer.bind(this)),this.barrel.on("rotation-changed",this.getBulletDirection.bind(this))},lookAtPlayer:function(e){this._shootCountTime+=1,this._target=cc.v2(e.position.x-this.node.position.x,e.position.y-this.node.position.y);var t=Math.atan2(this._target.y,this._target.x);this._angleD=cc.misc.radiansToDegrees(t)+90,this.barrel.angle=this._angleD,this._shootCountTime>=120&&(this.shootPlayer(),this._shootCountTime=0)},getBulletDirection:function(){this.bulletPos=this.barrel.convertToWorldSpaceAR(this.bulletSpawnPos.position),this.bulletPos=this.node.parent.convertToNodeSpaceAR(this.bulletPos)},shootPlayer:function(){this._isDead||o.instance.emit("SpawnBullet",this.bulletPos,this._target,this.enemyBullet,this._angleD+180)},onBeginContact:function(e,t,n){4==n.tag&&(this._enemyHealth>0&&(this._enemyHealth-=10,o.instance.emit("getDamge",this.node)),this._enemyHealth<=0&&this.enemyDead()),"Bullet"===n.node.group&&n.node.destroy()},enemyDead:function(){this.node.active=!1,this._isDead=!0;var e=cc.instantiate(this.deadEffect);this.node.parent.addChild(e),e.position=this.node.position,e.scale=0,cc.tween(e).to(.2,{scale:.5}).to(.5,{opacity:0}).call(function(){return e.destroy()}).start()}}),cc._RF.pop()},{EventsListener:"EventsListener"}],EventsListener:[function(e,t,n){"use strict";cc._RF.push(t,"85e2a7EYx9GdaXF/1ZFHwL0","EventsListener");var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=e("events"),r=function(){function e(){s(this,e),this._emiter=new o,this._emiter.setMaxListeners(100)}return i(e,[{key:"emit",value:function(){var e;(e=this._emiter).emit.apply(e,arguments)}},{key:"registerEvent",value:function(e,t){this._emiter.on(e,t)}},{key:"registerOnce",value:function(e,t){this._emiter.once(e,t)}},{key:"removeEvent",value:function(e,t){this._emiter.removeListener(e,t)}},{key:"destroy",value:function(){this._emiter.removeAllListeners(),this._emiter=null,e.instance=null}}]),e}();r.instance=null,t.exports=r,cc._RF.pop()},{events:1}],"HUD Controller":[function(e,t,n){"use strict";cc._RF.push(t,"b4168GVnLpBZIT0g6MooRgd","HUD Controller");var i=e("EventsListener");cc.Class({extends:cc.Component,properties:{hudHealth:cc.Node,hudAmmo:cc.Node,loseLayOut:cc.Layout,winLayOut:cc.Layout,scene:null},start:function(){i.instance.registerEvent("HUDcontroll",this.HUD.bind(this)),i.instance.registerEvent("Lose",this.loseLevel.bind(this)),i.instance.registerEvent("Win",this.winLevel.bind(this)),this.scene=cc.director.getScene(this.Scene)},HUD:function(e,t){this.hudHealth.getComponent(cc.Label).string=e>0?"HEALTH: "+e:"HEALTH: 0",this.hudAmmo.getComponent(cc.Label).string="AMMO x "+t},loseLevel:function(){this.loseLayOut.node.active=!0,this.loseLayOut.node.scale=0,cc.tween(this.loseLayOut.node).to(1,{scale:1}).start()},winLevel:function(){this.winLayOut.node.active=!0,this.winLayOut.node.scale=0,cc.tween(this.winLayOut.node).to(1,{scale:1}).start()},onResetClick:function(){cc.director.loadScene(this.scene.name)},onExitClick:function(){cc.director.loadScene("StartMenu")},onNextLevelClick:function(){var e=parseInt(this.scene.name)+1;e=String(e),cc.director.loadScene(e)}}),cc._RF.pop()},{EventsListener:"EventsListener"}],MainCamera:[function(e,t,n){"use strict";cc._RF.push(t,"5e756iNqsNEJYs4k2+FDnuY","MainCamera"),cc.Class({extends:cc.Component,properties:{target:cc.Node},update:function(e){this.node.position=this.target.position}}),cc._RF.pop()},{}],MainGameController:[function(e,t,n){"use strict";cc._RF.push(t,"453a9S644hAhJ6ccPXXrubU","MainGameController");var i=e("EventsListener");cc.Class({extends:cc.Component,properties:{_managerPhysics:null,_managerCollsion:null,effectHit:cc.Prefab},onLoad:function(){var e=cc.director.getCollisionManager(),t=cc.director.getPhysicsManager();t.enabled=!0,e.enable=!0,e.enabledDebugDraw=!0,t.enabledDebugDraw=!0,t.gravity=new cc.v2(0,0),i.instance=new i,i.instance.registerEvent("SpawnBullet",this.Shoot.bind(this))},Shoot:function(e,t,n,i){this.node.getComponent(cc.AudioSource).play();var s=cc.instantiate(n),o=cc.instantiate(this.effectHit);s.setPosition(e),s.angle=i,o.angle=i,o.setPosition(e),this.node.parent.addChild(o),this.node.parent.addChild(s);var r=cc.moveBy(3,cc.v2(10*t.x,10*t.y)),c=cc.callFunc(function(){s.destroy()},this),a=cc.sequence(r,c);cc.tween(o).to(.1,{scaleX:0}).call(function(){return o.destroy()}).start(),s.runAction(a)}}),cc._RF.pop()},{EventsListener:"EventsListener"}],MainLayOutController:[function(e,t,n){"use strict";cc._RF.push(t,"9bcb5/DCd9MmKZLdULJA398","MainLayOutController");var i=e("EventsListener");cc.Class({extends:cc.Component,ctor:function(){this._btnArr={startFlag:!1,tutorialFlag:!1,exitFlag:!1}},properties:{},get:function(e){return this._btnArr[e]},clickStart:function(){this._btnArr.startFlag=!0,this._btnArr.tutorialFlag=!1,i.instance.emit("ButtonOnClick",this._btnArr)},clickOption:function(){this._btnArr.startFlag=!1,this._btnArr.tutorialFlag=!1,i.instance.emit("ButtonOnClick",this._btnArr)},clickTutorial:function(){this._btnArr.startFlag=!1,this._btnArr.tutorialFlag=!0,i.instance.emit("ButtonOnClick",this._btnArr)}}),cc._RF.pop()},{EventsListener:"EventsListener"}],MenuStartController:[function(e,t,n){"use strict";cc._RF.push(t,"5ed3fZBbvhMWKFkWJ6ep+tM","MenuStartController");var i=e("EventsListener");cc.Class({extends:cc.Component,properties:{mainLayOut:cc.Layout,tutorialLayOut:cc.Layout,backBtn:cc.Button,backGround:cc.Node},onLoad:function(){i.instance=new i,i.instance.registerEvent("ButtonOnClick",this.onClick.bind(this)),this.backBtn.node.active=!1},start:function(){this.animationTitle()},onClick:function(e){this.mainLayOut.node.active=!1,e.startFlag?cc.director.loadScene("1"):e.tutorialFlag?(this.backBtn.node.active=!0,this.tutorialLayOut.node.active=!0):e.exitFlag},clickBack:function(){this.tutorialLayOut.node.active=!1,this.backBtn.node.active=!1,this.mainLayOut.node.active=!0},animationTitle:function(){var e=cc.tween().to(1,{scale:1.5}).to(1,{scale:1}),t=cc.tween().to(1,{skewY:10}).to(1,{skewY:0}).to(1,{skewY:-10}).to(1,{skewY:0});e.clone(cc.find("Canvas/MainLayOut/Title")).start(),t.clone(cc.find("Canvas/MainLayOut/Title")).repeatForever().start()},update:function(e){this.backGround.position=cc.v2(0,this.backGround.position.y-1),-640===this.backGround.position.y&&(this.backGround.position=cc.v2(0,0))}}),cc._RF.pop()},{EventsListener:"EventsListener"}],SaveName:[function(e,t,n){"use strict";cc._RF.push(t,"17703kFl4RFi4UrE9TGRnl/","SaveName");e("EventsListener");cc.Class({extends:cc.Component,properties:{nameEditBox:cc.EditBox,_arrPlayer:[]},onLoad:function(){var e=cc.sys.localStorage.getItem("winPlayer");this._arrPlayer=null!==e?JSON.parse(e):[],cc.log(e)},enterName:function(){var e=this.nameEditBox.getComponent(cc.EditBox).string;this._arrPlayer.push(e),cc.sys.localStorage.setItem("winPlayer",JSON.stringify(this._arrPlayer)),cc.director.loadScene("StartMenu")}}),cc._RF.pop()},{EventsListener:"EventsListener"}],TankController:[function(e,t,n){"use strict";cc._RF.push(t,"3d8f6EW5eNM1rNw8Kpdsf0W","TankController");var i=e("EventsListener");cc.Class({extends:cc.Component,properties:{rb:cc.RigidBody,spawnBullet:cc.Node,BulletPrefabs:cc.Prefab,speedBullet:{default:200,serializable:!1},tankSpeed:{default:300,serializable:!1},_Ammunition:{default:10,serializable:!1},_playerHealth:{default:100,serializable:!1}},onLoad:function(){cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this),this.node.on("rotation-changed",this.getBulletDirection.bind(this))},getBulletDirection:function(){this.bulletPos=this.node.convertToWorldSpaceAR(this.spawnBullet.position),this.bulletPos=this.node.parent.convertToNodeSpaceAR(this.bulletPos)},onKeyDown:function(e){switch(e.keyCode){case cc.macro.KEY.a:this.moveLeft();break;case cc.macro.KEY.d:this.moveRight();break;case cc.macro.KEY.w:this.moveUp();break;case cc.macro.KEY.s:this.moveDown()}switch(e.keyCode){case cc.macro.KEY.space:this._Ammunition>0&&void 0!=this.bulletPos&&(this.getBulletDirection(),this._Ammunition-=1,i.instance.emit("SpawnBullet",this.bulletPos,this._shootDirec,this.BulletPrefabs,this.node.angle),i.instance.emit("HUDcontroll",this._playerHealth,this._Ammunition))}},onKeyUp:function(e){switch(e.keyCode){case cc.macro.KEY.w:case cc.macro.KEY.s:case cc.macro.KEY.a:case cc.macro.KEY.d:this.rb.linearVelocity=new cc.v2(0,0)}},moveUp:function(){this.node.angle=0,this._shootDirec=new cc.v2(0,this.speedBullet),this.rb.linearVelocity=new cc.v2(0,this.tankSpeed)},moveDown:function(){this.node.angle=180,this._shootDirec=new cc.v2(0,-this.speedBullet),this.rb.linearVelocity=new cc.v2(0,-this.tankSpeed)},moveLeft:function(){this.node.angle=90,this._shootDirec=new cc.v2(-this.speedBullet,0),this.rb.linearVelocity=new cc.v2(-this.tankSpeed,0)},moveRight:function(){this.node.angle=270,this._shootDirec=new cc.v2(this.speedBullet,0),this.rb.linearVelocity=new cc.v2(this.tankSpeed,0)},onBeginContact:function(e,t,n){5===n.tag&&(this._Ammunition+=5,i.instance.emit("HUDcontroll",this._playerHealth,this._Ammunition),n.node.destroy()),3===n.tag&&(this._playerHealth-=30,i.instance.emit("HUDcontroll",this._playerHealth,this._Ammunition),this._playerHealth<=0?this.playerDead():this.playerGetDame()),6===n.tag&&(this._playerHealth-=10,i.instance.emit("HUDcontroll",this._playerHealth,this._Ammunition),this._playerHealth<=0?this.playerDead():this.playerGetDame()),10===n.tag&&(this._Ammunition=0,i.instance.emit("Win"),this.node.active=!1),"Bullet"===n.node.group&&n.node.destroy()},playerDead:function(){this.node.active=!1,this._Ammunition=0,i.instance.emit("Lose")},playerGetDame:function(){this._playerHealth>0?cc.tween(this.node).to(.2,{color:new cc.Color(255,0,0,255)}).to(.2,{color:new cc.Color(255,255,255,255)}).to(.2,{color:new cc.Color(255,0,0,255)}).to(.2,{color:new cc.Color(255,255,255,255)}).to(.2,{color:new cc.Color(255,0,0,255)}).to(.2,{color:new cc.Color(255,255,255,255)}).start():this._playerHealth<=0&&this.playerDead()}}),cc._RF.pop()},{EventsListener:"EventsListener"}]},{},["AmmoBoxEffect","CheckPlayer","Enemies Monster","EnemiesTank","EventsListener","HUD Controller","MainCamera","MainGameController","MainLayOutController","MenuStartController","SaveName","TankController"]);